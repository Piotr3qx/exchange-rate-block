!function(){class e{constructor(e){this.dateInput=e,this.dateInputCurrency=this.dateInput.dataset.currency,this.getComplementaryElements(this.dateInput.dataset.id)}getComplementaryElements(e){this.exchchangeRateContainer=document.querySelector(`#${e}`),this.exchchangeRateDate=document.querySelector(`#${e} .exchangerate__date_value`),this.exchchangeRateRate=document.querySelector(`#${e} .exchangerate__rate_value`),this.exchchangeRateError=document.querySelector(`#${e} .exchangerate__error`)}checkDate(){const e=new Date,t=new Date(this.dateInput.value);return!(e.getTime()<t.getTime())}getNewDateValue(){this.checkDate()?this.makeAjaxCall():this.setNewValues("Wybrana data nie może być późniejsza niż dzisiejsza.","n/a")}makeAjaxCall(){fetch(exchangeRateData.ajaxurl,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"},body:new URLSearchParams({action:"get_ajax_rate_data",date:this.dateInput.value,currency:this.dateInputCurrency,ajaxNonce:exchangeRateData.ajaxnonce})}).then((e=>e.json())).then((e=>{const{data:t}=e;this.setNewValues(t.error_message,t.rate,e.success)})).catch((e=>console.log(e)))}setNewValues(e,t,a){this.exchchangeRateError.innerText=e,this.exchchangeRateRate.innerText=t,this.exchchangeRateDate.innerText=this.dateInput.value,!0===a?this.exchchangeRateContainer.classList.remove("exchangerate__is-error"):this.exchchangeRateContainer.classList.add("exchangerate__is-error")}}document.querySelectorAll(".exchangerate__date-picker")&&document.querySelectorAll(".exchangerate__date-picker").forEach((t=>{const a=new e(t);t.addEventListener("change",(e=>{a.getNewDateValue()}))}))}();